description: >
  Build application
parameters:
  resource_class:
    type: string
    default: large
  build_env:
    type: enum
    enum: ['beta', 'prod']
    default: beta
executor: js
resource_class: << parameters.resource_class >>
steps:
  - checkout
  - attach_workspace:
      at: .
  - run:
      name: Delete .env
      command: rm .env
  - run:
      name: Build the application
      command: APP_ENV=<< parameters.build_env >> yarn build
  - save_build_outputs:
      build_env: << parameters.build_env >>
